# ??????? Week Layout ???? ?????

## ?? ???? ???

???? `CalendarWeekLayoutTests.cs` ???? ??????? ????? ??? ?? ????? ??????? ?????? ??? ?? ???????? ???? ??? ????? ???? ???????.

## ?? ??? ??????

????? ??? ?? ?????:
- ?? ??? ?? ??? ?? ???? ???? ??? ?????? (?? ???? ??? ????)
- ????: ??? ? ???? (1403/05/02) ??? ???? ???? ?? ???? ???? ????? ???? ???? ?? ?? ???? ??????
- ????????? ????? (????? ??????? ????) ?? ????? ??? ????

## ?? ?????? ????

### ????? ???? (Persian)
```
???? | ?????? | ?????? | ??????? | ???????? | ???????? | ????
  0  |   1    |   2    |   3    |    4     |    5    |  6
```

### ????? ?????? (Gregorian)
```
?????? | ?????? | ??????? | ???????? | ???????? | ???? | ????
  0    |   1    |   2    |    3     |    4    |  5   |  6
```

### ????? ???? (Hijri)
```
???? | ?????? | ?????? | ??????? | ???????? | ???????? | ????
  0  |   1    |   2    |   3    |    4     |    5    |  6
```

## ?? ??????? ?????

### 1. TestConsecutiveDaysInConsecutiveColumns
**???:** ????? ????? ?????? ?????? ?? ???????? ?????? ???? ?????

```csharp
// ??? 1? 2? 3 ???? ?? ????? ???? ?????
Day 1 -> Day 2 -> Day 3
```

### 2. TestWeekRowHasSevenColumns
**???:** ????? ????? ????? ?????? ?????????? ??? ???? ????? ?? 7 ??? (7 ????)

```csharp
// DaysOfMonth.Count % 7 == 0
```

### 3. TestPersianCalendarDayColumnAlignment
**???:** ???? ????? ????? ?? ??? ?? ???? ???? ??? ???? ????

```csharp
// ??? 5 ??? 1403 ??? 1 = ????????
// ???? ?? ???? 4 ???? ????
```

### 4. TestGregorianCalendarDayColumnAlignment
**???:** ???? ????? ??????? ?? ??? ?? ???? ???? ??? ???? ????

```csharp
// 15 ????? 2024 = ????????
// ???? ?? ???? 4 ???? ????
```

### 5. TestEmptyCellsBeforeFirstDay
**???:** ???????? ???? ?? ???? ??? ?? ??? ???? ??? ?????? ????? ?????

```csharp
// ??? ??? ?? ???? ???? ???
// 5 ???? ???? ??? ?? ??? 1 ???? ????? ???? ???
```

### 6. TestEndOfMonthDayPosition
**???:** ????? ??? ??? ?? ???? ???? ??? ???? ????

```csharp
// 31 ????? 2024 = ????
// ???? ?? ???? 5 ???? ????
```

### 7. TestAllDaysAreConsecutive
**???:** ???? ?????? ??? ?? ????? 1? 2? 3? ... ????? ???? ????

### 8. TestMultipleMonthsWeekLayout
**???:** ??? ??? ??? ????? ???? ??????? ?? ???????

```csharp
[Theory]
[InlineData(2024, 1)]
[InlineData(2024, 6)]
[InlineData(2024, 12)]
```

### 9. TestPersianCalendarMultipleMonths
**???:** ??? ??? ?? ????? ???? ?? ??? ???

```csharp
[Theory]
[InlineData("1403/01/15")] // ???????
[InlineData("1403/06/15")] // ??????
[InlineData("1403/12/15")] // ?????
```

### 10. TestHolidayDayInCorrectColumn_Gregorian
**???:** ??? ????? (???? ???? ??????) ?? ???? ???? ???? ????

```csharp
// 5 ????? 2024 = ????
// ???? ?? ???? 6 (????? ????) ???? ????
```

### 11. TestSpecificPersianDateColumnPlacement
**???:** ????? ??? ???? ?? ???? ???? ???? ????

```csharp
// 1403/05/02
// ??? 2 = ????????
// ???? ?? ???? 4 ???? ????
```

### 12. TestSpecificGregorianDateColumnPlacement
**???:** ????? ??? ?????? ?? ???? ???? ???? ????

```csharp
// 15 ????? 2024 = ????????
// ???? ?? ???? 4 ???? ????
```

### 13. TestVariousMonthStartAlignment
**???:** ???????? ?? ?? ?????? ????? ???? ??????? ???? ???? ????

```csharp
[Theory]
[InlineData(2024, 2)] // ????????
[InlineData(2024, 3)] // ????
[InlineData(2024, 4)] // ??????
```

## ?? ???? ??? ??????

```csharp
// ????: ??? ??? 2 ?? ??? ?? ???? ????
var viewModel = new DatePickerViewModel(options);
var day2 = viewModel.DaysOfMonth.FirstOrDefault(d => d.DayNum == 2);

int day2Index = viewModel.DaysOfMonth.IndexOf(day2);
int columnPosition = day2Index % 7;  // ???? (0-6)

var dayOfWeek = calendarService.GetDayOfWeek(day2.GregorianDate);
int expectedColumn = (int)dayOfWeek;

Assert.Equal(expectedColumn, columnPosition);
```

## ? ????? ????

??? ???? ??? ???:
- ???? ?????? ??? ?? ???????? ???? ???? ?????
- ?????? ?????? ?? ????? ???? ?????
- ???????? ???? ?? ??? ???? ?????
- ????? ?? ??????? ???? ????? ?? 7 ?????

## ? ?????? ???????

### ???: ??? ?? ???? ???
```
Expected: Friday (column 5) but got column 2
? ????: CalendarService ???????? ?? ?????? ?????? ??????
```

### ???: ???? ???? ?????
```
Expected: 35 days (5*7) but got 36 days
? ????: ???????? ???? ?? ????? ?? ????? ???? ????
```

### ???: ?????? ???????
```
Expected day 5 after day 4 but got day 6
? ????: ???? ????? ????? ?????? ???
```

## ?? ????? ??????

```bash
# ????? ???? ??????? layout
dotnet test --filter "CalendarWeekLayoutTests"

# ????? ?? ??? ???
dotnet test --filter "TestPersianCalendarDayColumnAlignment"

# ????? ?? verbose output
dotnet test --verbosity detailed
```

## ?? ???? ???

1. **DayOfMonth.IsInCurrentMonth**: ??? ?????? ??? ???? ?? ????? ????
2. **Column Position**: `(dayIndex % 7)` ???? ?? ?????? ??????
3. **Day of Week**: ?? ????? day of week ?????? ????
4. **Grid Structure**: ????? ????? 7 ???? ????

## ?? ????? ?????

- `DatePickerViewModel.cs` - ???? ????? ?????? ???
- `ICalendarService.cs` - ?????? ?????
- `DatePickerView.xaml` - ????? ????? (GridItemsLayout Span="7")
